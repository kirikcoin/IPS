<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:eye="http://jsfcomponents.eyeline.mobi"
        xmlns:ui="http://java.sun.com/jsf/facelets">

  <ui:composition template="/templates/main.xhtml">

    <ui:define name="head">
      <link rel="STYLESHEET" type="text/css"
            href="#{facesContext.externalContext.requestContextPath}/resources/pages/login.less"/>

      <script type="text/javascript"
              src="#{facesContext.externalContext.requestContextPath}/resources/pages/passwordreset.js">
      </script>

    </ui:define>

    <ui:define name="scripts">
      <script type="text/javascript">
        //    <![CDATA[
        $(function () {
          var ifdone= "#{param['recovery']}";
          if (ifdone == "false") {
            ips.message.error("#{bundle['passwrecovery.form.nosuchemail']}");
            if (history && history.replaceState) {
              history.replaceState(null, null, window.location.pathname);
            }

          }
          page.init();
        });
        //    ]]>
      </script>
    </ui:define>

    <ui:define name="content">
      <div id="passwRecoveryForm" class="border-shadow">
        <div class="page-header">
          <h:outputText value="#{bundle['passwrecovery.form.title']}"/>
        </div>

        <div id="passwRecoveryFormBody">
          <h:form name="rpForm" id="rpForm" action="" method="post"
                  enctype="application/x-www-form-urlencoded">

            <table cellspacing="0" cellpadding="0" border="0">

              <tr>
                <td colspan="2">#{bundle['passwrecovery.form.entermailtext']}</td>
              </tr>

              <tr>
                <td><label for="recoveryEmail">email:</label></td>
                <td align="right">
                  <eye:inputText id="recoveryEmail" value="#{passwordResetController.email}" maxlength="50"
                                 validator="email"
                                 validatorMessage="#{bundle['passwrecovery.form.incorrectemail']}"/>
                </td>
              </tr>
            </table>

            <table>
              <tr>
                <td align="left" valign="middle">
                  <eye:button>
                    <h:commandLink id="sendButton"
                                   styleClass="button-green"
                                   action="#{passwordResetController.resetPassword}"
                                   value="#{bundle['passwrecovery.form.send.btn']}"/>
                  </eye:button>
                </td>
                <td align="right">
                  <h:commandLink id="cancelButton"
                                 styleClass="button-green"
                                 action="LOGIN"
                                 value="#{bundle['passwrecovery.form.cancel.btn']}"/>
                </td>
              </tr>
            </table>

          </h:form>

        </div>
      </div>
    </ui:define>

  </ui:composition>

</f:view>
