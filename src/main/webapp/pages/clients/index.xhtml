<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:eye="http://jsfcomponents.eyeline.mobi"
        >

  <ui:composition template="/templates/main.xhtml">

    <ui:define name="head">
      <link rel="STYLESHEET" type="text/css"
            href="#{facesContext.externalContext.requestContextPath}/resources/pages/clients/index.less"/>

      <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/pages/clients/index.js"></script>
    </ui:define>

    <ui:define name="scripts">
      <script type="text/javascript">
        $(function(){
          page.init();
        })
      </script>
    </ui:define>

    <ui:define name="content">

      <h:form enctype="multipart/form-data" id="content">

        <h:panelGroup layout="block" styleClass="border-shadow">

          <h:panelGrid columns="2" styleClass="page-header">
            <h:outputText value="#{bundle['client.list.title']}"/>
            <h:panelGroup styleClass="page-header-input">
              <h:outputLabel value="#{bundle['search.label']}"/>
              <eye:inputText id="search"
                             value="#{clientListController.search}"
                             onkeydown="return page.nameFilterKeyDown(event)"/>
            </h:panelGroup>
          </h:panelGrid>

          <eye:dataTable id="table"
                         value="#{clientListController.tableModel}"
                         var="row"
                         pageSize="50"
                         tableClass="grid">
            <f:facet name="ifEmpty">
              <h:outputText value="Нет элементов"/>
            </f:facet>
            <eye:row>
              <eye:column name="fullname" title="#{bundle['client.list.table.fullname']}"
                          sortable="true" defaultSortOrder="desc">
                <h:commandLink value="#{row.fullname}"
                               action="null"
                               onclick="jsfc('clientSettingsDialog').show(); return false"/>
              </eye:column>
              <eye:column name="company" title="#{bundle['client.list.table.company']}"
                          sortable="true">
                <h:commandLink value="#{row.company}"
                               onclick="jsfc('clientSettingsDialog').show(); return false"/>
              </eye:column>
              <eye:column name="login" title="#{bundle['client.list.table.login']}"
                          sortable="true">
                <h:commandLink value="#{row.login}"
                               onclick="jsfc('clientSettingsDialog').show(); return false"/>
              </eye:column>
              <eye:column name="email" title="#{bundle['client.list.table.email']}"
                          sortable="true">
                <h:commandLink value="#{row.email}"
                               onclick="jsfc('clientSettingsDialog').show(); return false"/>
              </eye:column>
              <eye:column name="status" title="#{bundle['client.list.table.status']}"
                          sortable="true">
                <h:outputText value="#{bundle['client.list.table.status.active']}"
                              styleClass="clientStatusActive"
                              rendered="#{row.isBlocked == false}" />
                <h:outputText value="#{bundle['client.list.table.status.blocked']}"
                              styleClass="clientStatusBlocked"
                              rendered="#{row.isBlocked == true}" />
              </eye:column>
            </eye:row>
          </eye:dataTable>

          <h:panelGroup layout="block" styleClass="page-footer"/>

        </h:panelGroup>

        <h:panelGroup layout="block" style="margin-top: 15px;">
          <h:commandLink value="#{bundle['client.list.button.createclient']}"
                         styleClass="button-black"
                         onclick="jsfc('newClientDialog').show(); return false"/>
        </h:panelGroup>


        <eye:dialog id="newClientDialog" title="#{bundle['client.dialog.newclient.title']}" width="400">

          <h:panelGrid columns="2">
            <h:outputLabel value="#{bundle['client.dialog.newclient.field.fullname']}"
                           for="newClientFullName"/>
            <eye:inputText id="newClientFullName"
                           value=""/>

            <h:outputLabel value="#{bundle['client.dialog.newclient.field.company']}"
                           for="newClientCompany"/>
            <eye:inputText id="newClientCompany"
                           value=""/>

            <h:outputLabel value="#{bundle['client.dialog.newclient.field.login']}"
                           for="newClientLogin"/>
            <eye:inputText id="newClientLogin"
                           value=""/>

            <h:outputLabel value="#{bundle['client.dialog.newclient.field.email']}"
                           for="newClientEmail"/>
            <eye:inputText id="newClientEmail"
                           value=""/>


          </h:panelGrid>
          <eye:buttons>
            <eye:button>
              <h:commandLink styleClass="button-green"
                             value="#{bundle['client.dialog.newclient.button.create']}"
                             />
            </eye:button>
            <eye:button>
              <h:commandLink styleClass="button-green"
                             value="#{bundle['client.dialog.newclient.button.cancel']}"
                             onclick="jsfc('newClientDialog').hide(); ips.message.hideAll(); return false;"/>
            </eye:button>
            <eye:space/>
          </eye:buttons>

        </eye:dialog>

        <eye:dialog id="clientSettingsDialog" title="#{bundle['client.dialog.settings.title']}" width="400">

          <h:panelGrid columns="2">
            <h:outputLabel value="#{bundle['client.dialog.settings.field.fullname']}"
                           for="clientSettingsFullName"/>
            <eye:inputText id="clientSettingsFullName"
                           value=""/>

            <h:outputLabel value="#{bundle['client.dialog.settings.field.company']}"
                           for="clientSettingsCompany"/>
            <eye:inputText id="clientSettingsCompany"
                           value=""/>

            <h:outputLabel value="#{bundle['client.dialog.settings.field.login']}"
                           for="clientSettingsLogin"/>
            <eye:inputText id="clientSettingsLogin"
                           value=""/>

            <h:outputLabel value="#{bundle['client.dialog.settings.field.email']}"
                           for="clientSettingsEmail"/>
            <eye:inputText id="clientSettingsEmail"
                           value=""/>


          </h:panelGrid>
          <eye:buttons>
            <eye:button>
              <h:commandLink styleClass="button-green"
                             value="#{bundle['client.dialog.newclient.button.create']}"
                      />
            </eye:button>
            <eye:button>
              <h:commandLink styleClass="button-green"
                             value="#{bundle['client.dialog.newclient.button.cancel']}"
                             onclick="jsfc('clientSettingsDialog').hide(); ips.message.hideAll(); return false;"/>
            </eye:button>
            <eye:space/>
          </eye:buttons>

        </eye:dialog>

      </h:form>



    </ui:define>

  </ui:composition>

</f:view>
