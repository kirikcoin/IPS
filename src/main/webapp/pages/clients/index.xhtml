<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:eye="http://jsfcomponents.eyeline.mobi"
        >

  <ui:composition template="/templates/main.xhtml">

    <ui:define name="head">
      <link rel="STYLESHEET" type="text/css"
            href="#{facesContext.externalContext.requestContextPath}/resources/pages/clients/index.less"/>

      <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/pages/section1/index.js"></script>
    </ui:define>

    <ui:define name="scripts">
      <script type="text/javascript">
        $(function(){
          page.init();
        })
      </script>
    </ui:define>

    <ui:define name="content">

      <h:form enctype="multipart/form-data" id="content">

        <h:panelGroup layout="block" styleClass="border-shadow">

          <h:panelGrid columns="2" styleClass="page-header">
            <h:outputText value="#{bundle['client.list.title']}"/>
            <h:panelGroup styleClass="page-header-input">
              <h:outputLabel value="Поиск:"/>
              <eye:inputText id="search" value="#{clientListController.search}" onkeydown="return page.nameFilterKeyDown(event)"/>
            </h:panelGroup>
          </h:panelGrid>

          <eye:dataTable id="table" value="#{clientListController.tableModel}" var="row" pageSize="50" tableClass="grid">
            <f:facet name="ifEmpty">
              <h:outputText value="Нет элементов"/>
            </f:facet>
            <eye:row>
              <eye:column name="fullname" title="#{bundle['client.list.table.fullname']}"
                          sortable="true" defaultSortOrder="desc">
                <h:commandLink value="#{row.fullname}" action="null"/>
              </eye:column>
              <eye:column name="company" title="#{bundle['client.list.table.company']}"
                          sortable="true">
                <h:outputText value="#{row.company}"/>
              </eye:column>
              <eye:column name="login" title="#{bundle['client.list.table.login']}"
                          sortable="true">
                <h:commandLink value="#{row.login}"/>
              </eye:column>
              <eye:column name="email" title="#{bundle['client.list.table.email']}"
                          sortable="true">
                <h:commandLink value="#{row.email}"/>
              </eye:column>
              <eye:column name="status" title="#{bundle['client.list.table.status']}"
                          sortable="true">
                <h:outputText value="#{bundle['client.list.table.status.active']}"
                              styleClass="clientStatusActive"
                              rendered="#{row.isBlocked == false}" />
                <h:outputText value="#{bundle['client.list.table.status.blocked']}"
                              styleClass="clientStatusBlocked"
                              rendered="#{row.isBlocked == true}" />
              </eye:column>
            </eye:row>
          </eye:dataTable>

          <h:panelGroup layout="block" styleClass="page-footer"/>

        </h:panelGroup>

        <h:panelGroup layout="block" style="margin-top: 15px;">
          <h:commandLink value="Диалог" styleClass="button-black" onclick="jsfc('dialog').show(); return false"/>
        </h:panelGroup>

        <eye:dialog id="dialog" title="Welcome" width="250">
          <h:panelGroup layout="block">
            <h:outputText value="Hello, admin!"/>
          </h:panelGroup>
          <eye:buttons>
            <eye:button>
              <h:commandLink styleClass="button-green" value="OK" onclick="jsfc('dialog').hide(); return false;"/>
            </eye:button>
            <eye:button>
              <h:commandLink styleClass="button-green" value="Cancel" onclick="jsfc('dialog').hide(); return false;"/>
            </eye:button>
            <eye:space/>
          </eye:buttons>
        </eye:dialog>

      </h:form>

    </ui:define>

  </ui:composition>

</f:view>
