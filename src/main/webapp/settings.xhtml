<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:eye="http://jsfcomponents.eyeline.mobi" >

  <ui:composition template="/templates/main.xhtml">

    <ui:define name="head">
      <link rel="STYLESHEET" type="text/css"
            href="#{resources.path}/resources/pages/settings.less"/>

      <script type="text/javascript"
              src="#{resources.path}/resources/pages/settings.js">
      </script>
    </ui:define>


    <ui:define name="scripts">
      <script type="text/javascript">
        //    <![CDATA[
        if ("#{settingsPageController.error}" == 'false') {
          ips.message.info("#{bundle['settings.saved']}");
        }
        //    ]]>
      </script>
    </ui:define>

    <ui:define name="content">

      <div id="settingsPage">
        <h:form enctype="multipart/form-data" id="content" prependId="false">

          <h:panelGroup layout="block" styleClass="border-shadow">

            <h:panelGrid columns="2" styleClass="page-header">
              <h:outputText value="#{bundle['settings.title']}"/>
            </h:panelGrid>

            <h:panelGroup id="settingsPageBody" layout="block" styleClass="page-body">
              <div style="margin:10px"></div>

              <h:panelGrid columns="2" columnClasses="col1,col2">

                <h:outputLabel value="#{bundle['settings.skin']}"
                               for="skin"/>
                <h:selectOneMenu id="skin" value="#{settingsPageController.user.uiProfile.skin}">
                  <f:selectItems value="#{settingsPageController.skins}"/>
                </h:selectOneMenu>

                <eye:collapsingGroup opened="false" id="groupSettings">
                  <f:facet name="header">
                    <h:panelGroup>
                      <h:outputText value="#{bundle['settings.logo']}"/>

                    </h:panelGroup>
                  </f:facet>
                  <div style="margin:10px"></div>
                  <h:panelGroup>
                    <h:commandLink value="#{bundle['settings.logo.modify.button']}"
                                   onclick="return page.onLogoModifyDialogShow()"
                                   styleClass="modify-left"
                                   rendered="true"/>
                    <div style="margin:10px"></div>
                     <!--<eye:inputFile id="logo" value="#{settingsPageController.imageFile}"/>-->

                      <h:graphicImage rendered="#{settingsPageController.user.uiProfile.icon != null}" value="images/#{settingsPageController.user.id}"/>
                      <h:outputText rendered="#{settingsPageController.user.uiProfile.icon == null}" value="#{bundle['settings.logo.no']}"/>
                  </h:panelGroup>
                </eye:collapsingGroup>


              </h:panelGrid>

              <div style="margin:10px"></div>
              <eye:buttons>
                <eye:button>
                  <h:commandLink styleClass="button-green" value="#{bundle['profile.edit.save.btn']}"
                                 action="#{settingsPageController.save}" />
                </eye:button>
                <eye:button>
                  <h:commandLink styleClass="button-green" value="#{bundle['profile.edit.cancel.btn']}"
                                 action="#{settingsPageController.cancelSave}"/>
                </eye:button>
                <eye:space/>
              </eye:buttons>
            </h:panelGroup>


            <h:panelGroup layout="block" styleClass="page-footer"/>

          </h:panelGroup>

          <eye:dialog id="logoModifyDialog"
                      title="#{bundle['client.dialog.settings.title']}"
                      width="400">
            <h:panelGrid columns="2">
              <h:outputLabel value="#{bundle['settings.logo']}"
                             for="logo"/>
              <eye:inputFile id="logo" value="#{settingsPageController.imageFile}"/>
            </h:panelGrid>

            <eye:buttons>
              <eye:button>
                <h:commandLink styleClass="button-green"
                               value="#{bundle['settings.logo.modify.dialog.save']}"
                               action="#{settingsPageController.saveLogo}"/>
              </eye:button>
              <eye:button>
                <h:commandLink styleClass="button-green"
                               value="#{bundle['settings.logo.modify.dialog.delete']}"
                               action="#{settingsPageController.deleteLogo}"/>
              </eye:button>
              <eye:button>
                <h:commandLink styleClass="button-green"
                               value="#{bundle['settings.logo.modify.dialog.cancel']}"
                               onclick="return page.onLogoModifyDialogHide();"/>
              </eye:button>
              <eye:space/>
            </eye:buttons>

          </eye:dialog>

        </h:form>
      </div>

    </ui:define>

  </ui:composition>

</f:view>
