<f:view xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:eye="http://jsfcomponents.eyeline.mobi"
        >

  <ui:composition template="/templates/main.xhtml">

    <ui:define name="head">
      <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/resources/pages/section1/index.js"></script>
      <link rel="STYLESHEET" type="text/css"
            href="#{facesContext.externalContext.requestContextPath}/resources/pages/profilepage.less"/>
    </ui:define>

    <ui:define name="scripts">
      <script type="text/javascript">
        $(function () {
          var error = #{profilePageController.error};
          var success = #{profilePageController.success}
          if (error)
            ips.message.error("#{bundle['profile.edit.message.error']}");

          if (success)
            ips.message.info("#{bundle['profile.edit.message.success']}")
        });
      </script>
    </ui:define>

    <ui:define name="content">

      <div id="profilePage">
        <h:form enctype="multipart/form-data" id="content" prependId="false">

          <h:panelGroup layout="block" styleClass="border-shadow">

            <h:panelGrid columns="2" styleClass="page-header">
              <h:outputText value="#{bundle['profile.edit.title']}"/>
            </h:panelGrid>

            <h:panelGroup id="profilePageBody" layout="block" styleClass="page-body">
              <div style="margin:10px"></div>

              <h:panelGrid columns="2">
                <h:outputLabel value="#{bundle['profile.edit.fio']}"
                               for="profileEditFio"/>
                <eye:inputText id="profileEditFio"
                               value="#{profilePageController.userFio}"/>

                <h:outputLabel value="#{bundle['profile.edit.email']}"
                               for="profileEditEmail" />
                <eye:inputText id="profileEditEmail"
                               value="#{profilePageController.userEmail}"/>
              </h:panelGrid>

              <h:panelGroup layout="block" styleClass="headerWithBottomSeparator">
                <h:outputText  value="#{bundle['profile.edit.changepassword']}"/>
              </h:panelGroup>

              <h:panelGrid columns="2">
                <h:outputLabel value="#{bundle['profile.edit.currentpassword']}"
                               for="profileEditCurrentPassword"/>
                <eye:inputText id="profileEditCurrentPassword"
                               secret="true"
                               value="#{profilePageController.currentPassword}"/>

                <h:outputLabel value="#{bundle['profile.edit.newpassword']}"
                               for="profileNewPassword" />
                <eye:inputText id="profileNewPassword"
                               secret="true"
                               value="#{profilePageController.newPassword}"/>

                <h:outputLabel value="#{bundle['profile.edit.confirmpassword']}"
                               for="profileConfirmPassword" />
                <eye:inputText id="profileConfirmPassword"
                               secret="true"
                               value="#{profilePageController.passwordForConfirm}"/>
              </h:panelGrid>
               <div style="margin:10px"></div>
              <eye:buttons>
                <eye:button>
                  <h:commandLink styleClass="button-green" value="#{bundle['profile.edit.save.btn']}"
                                 action="#{profilePageController.saveProfile}" />
                </eye:button>
                <eye:button>
                  <h:commandLink styleClass="button-green" value="#{bundle['profile.edit.cancel.btn']}"
                                 action="LOGIN"/>
                </eye:button>
                <eye:space/>
              </eye:buttons>
            </h:panelGroup>


            <h:panelGroup layout="block" styleClass="page-footer"/>

          </h:panelGroup>
        </h:form>
      </div>

    </ui:define>

  </ui:composition>

</f:view>
